{% extends 'edc_base/base.html' %}


{% block main %}

<div class="panel panel-default">
    <!-- Default panel contents -->
    <div class="panel-heading"><h4>Synchronisation Report</h4></div>
    <div class="panel-body">
        <ul class="list-group" style="width: 40%">
            <li class="list-group-item list-group-item-success">
                TOTAL CONSUMED
                <span class="badge">{{ consumed }}</span>
            </li>

            <li class="list-group-item list-group-item-danger">
                TOTAL ERRORS
                <span class="badge">{{ errors }}</span>
            </li>

            <li class="list-group-item list-group-item-warning">
                TOTAL DELETES
                <span class="badge">{{ deletes }}</span>
            </li>
             <li class="list-group-item list-group-item-info">
                TOTAL INSERTIONS
                <span class="badge"> {{ inserts }}</span>
            </li>
             <li class="list-group-item list-group-item-info">
                TOTAL UPDATES
                <span class="badge"> {{ updates }} </span>
            </li>
        </ul>

    </div>

 <table class="table table-bordered">
    <thead class="thead-dark">
        <tr>
            <th>DATE CREATED</th>
            <th>HOST CREATED</th>
            <th>CRF</th>
            <th>CONSUMED</th>
            <th>ERROR</th>
            <th>OPERATION</th>
        </tr>
    </thead>
    
    <tbody>
        {% for incoming_transaction in incoming_transactions %}
            {# Each "contact" is a Contact model object. #}
            <tr> 
                <td>{{ incoming_transaction.created }}</td>
                <td>{{ incoming_transaction.producer }}</td>
                <td>{{ incoming_transaction.tx_name }}</td>
                <td>{{ incoming_transaction.is_consumed }}</td>
                <td>{{ incoming_transaction.is_error }}</td>
                {% if  incoming_transaction.action == 'I'%}
                    <td>INSERT</td>
                {% elif incoming_transaction.action == 'U'%}
                    <td>UPDATE</td>
                {% elif incoming_transaction.action == 'D'%}            
                    <td>DELETE</td>
                {% else %}
                    <td>{{ incoming_transaction.action }}</td>
                {% endif %}
                    
            </tr>
        {% endfor %}
    </tbody>

    </table>

    <div class="pagination">
        <span class="step-links">
            {% if page_obj.has_previous %}
                <a href="?page=1">&laquo; first</a>
                <a href="?page={{ page_obj.previous_page_number }}">previous</a>
            {% endif %}

            <span class="current">
                Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
            </span>

            {% if page_obj.has_next %}
                <a href="?page={{ page_obj.next_page_number }}">next</a>
                <a href="?page={{ page_obj.paginator.num_pages }}">last &raquo;</a>
            {% endif %}
        </span>
    </div>
</div>


{% endblock main %}


    