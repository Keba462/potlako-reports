{% extends 'edc_base/base.html' %} {% block extra-scripts %}

<script src="https://cdn.jsdelivr.net/npm/chart.js@3.0.2/dist/chart.min.js"></script>
<script src="https://code.highcharts.com/highcharts.src.js"></script>
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="https://github.highcharts.com/master/highcharts.js"></script>
<script src="https://github.highcharts.com/master/highcharts-more.js"></script>
<script src="https://github.highcharts.com/master/modules/exporting.js"></script>

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">
  <link rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.20.0/dist/bootstrap-table.min.css">

<script>
  $.ajax({
    url: $("#container").attr("data-url"),
    dataType: "json",
    success: function (data) {
      Highcharts.chart("container", data);
    },
  });
</script>

{% endblock extra-scripts %} {% block main %}
<div class="alert alert-info text-center">
  <h2>Statistical Reports Per Machine</h2>
</div>

<div class="row">
  <div class="col-md-6">
    <div class="panel panel-info">
      <div class="panel-heading"><b>Appoinment numbers</b></div>
      <div class="panel-body">
        <table class="table table-hover">
          <thead>
            <tr>
              <th>Machine</th>
              <th>Overall</th>
              <th>Last Modified</th>
            </tr>
          </thead>
          <tbody>
            {% for appointment_statistic in appointment_statistics %}
            <tr>
              <td>{{ appointment_statistic.host_machine }}</td>
              <td>{{ appointment_statistic.appointments }}</td>
              <td>{{ appointment_statistic.last_modified }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <div class="col-md-6">
    <canvas id="myChart" width="250" height="290"></canvas>
    <script>
      var ctx = document.getElementById('myChart').getContext('2d');
      var myChart = new Chart(ctx, {
                  type: 'bar',

                  data: {
                      labels: [{% for appointment_statistic in appointment_statistics %}  '{{ appointment_statistic.host_machine }}',  {% endfor %}],
                      datasets: [{
                label : '',
                          data: [{% for appointment_statistic in appointment_statistics %}  {{ appointment_statistic.appointments }},  {% endfor %}],
                          backgroundColor: [
                              'rgba(255, 99, 132, 0.8)',
                              'rgba(54, 162, 235, 0.8)',
                              'rgba(255, 206, 86, 0.8)',
                              'rgba(75, 192, 192, 0.8)',
                              'rgba(153, 102, 255, 0.8)',
                              'rgba(255, 159, 64, 0.8)',
                              'rgba(240, 120, 50, 0.8)',
                          ],
                          borderColor: [
                              'rgba(255, 99, 132, 1)',
                              'rgba(54, 162, 235, 1)',
                              'rgba(255, 206, 86, 1)',
                              'rgba(75, 192, 192, 1)',
                              'rgba(153, 102, 255, 1)',
                              'rgba(255, 159, 64, 1)',
                              'rgba(240, 120, 50, 1)',

                          ],
                          borderWidth: 2
                      }]
                  },
                  options: {
                      scales: {
                          y: {
                              beginAtZero: true
                          }
                      }
                  }
              });
    </script>
  </div>
</div>
<div class="row">
  <div class="col-md-12">
    <table data-toggle="table" style="font-size: 11px">
      <thead >
        <tr>
          <th>CRF Name</th>
          {% for host_machine in host_machines %}
            <th style="width: 10v" > {{ host_machine | title }} </th>
          {% endfor %}
        </tr>
      </thead>
      <tbody>
        {% for crf_statistic in crf_statistics %}
          <tr>
            {% for data in  crf_statistic %}
              <td> {{ data }}</td>
            {% endfor %}
          </tr>
        {% endfor %}
      </tbody>
    </table>
    <br>

    <script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/bootstrap-table@1.20.0/dist/bootstrap-table.min.js"></script>
  </div>
</div>

{% endblock main%}


