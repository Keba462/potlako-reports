{% extends 'edc_base/base.html' %}


{% block extra-scripts %}

	<script src="https://cdn.jsdelivr.net/npm/chart.js@3.0.2/dist/chart.min.js"></script>
	<script src="https://code.highcharts.com/highcharts.src.js"></script>
	<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
	<script>
	  $.ajax({
	    url: $("#container").attr("data-url"),
	    dataType: 'json',
	    success: function (data) {
	      Highcharts.chart("container", data);
	    }
	  });
	</script>

{% endblock extra-scripts %}


{% block main %}
	<div class="alert alert-info text-center">
  		<h2>Statistical Reports Per Machine</h2>
	</div>
	
		<div class="row">
			<div class="col-md-6">
				<div class="panel panel-info">
					<div class="panel-heading"><b>Appoinment numbers</b></div>
						<div class="panel-body">
							<table class="table table-hover">
							  <thead>
							    <tr>
							      <th>Machine</th>
							      <th>Overall</th>
							    </tr>
							  </thead>
							  <tbody>
							    {% for appointment_statistic in appointment_statistics %}
                                    <tr>
                                        <td>{{ appointment_statistic.host_machine }}</td>
                                        <td>{{ appointment_statistic.appointments }}</td>
                                    </tr>
                                {% endfor %}
							  </tbody>
							</table>
				      </div>
					  
			    </div>
		    </div>
			
			<div class="col-md-6">
				<canvas id="myChart" width="250" height="290"></canvas>
					<script>
						var ctx = document.getElementById('myChart').getContext('2d');
						var myChart = new Chart(ctx, {
						            type: 'bar',
								
						            data: {
						                labels: [{% for appointment_statistic in appointment_statistics %}  '{{ appointment_statistic.host_machine }}',  {% endfor %}],
						                datasets: [{
											label : '',
						                    data: [{% for appointment_statistic in appointment_statistics %}  {{ appointment_statistic.appointments }},  {% endfor %}],
						                    backgroundColor: [
						                        'rgba(255, 99, 132, 0.8)',
						                        'rgba(54, 162, 235, 0.8)',
						                        'rgba(255, 206, 86, 0.8)',
						                        'rgba(75, 192, 192, 0.8)',
						                        'rgba(153, 102, 255, 0.8)',
						                        'rgba(255, 159, 64, 0.8)',
						                        'rgba(240, 120, 50, 0.8)',
						                    ],
						                    borderColor: [
						                        'rgba(255, 99, 132, 1)',
						                        'rgba(54, 162, 235, 1)',
						                        'rgba(255, 206, 86, 1)',
						                        'rgba(75, 192, 192, 1)',
						                        'rgba(153, 102, 255, 1)',
						                        'rgba(255, 159, 64, 1)',
						                        'rgba(240, 120, 50, 1)',
						
						                    ],
						                    borderWidth: 2
						                }]
						            },
						            options: {
						                scales: {
						                    y: {
						                        beginAtZero: true
						                    }
						                }
						            }
						        });
					</script>
			</div>
						

		</div>
		    
		  
{% endblock main%}